language: java

sudo: required

install:
  - sudo apt install luarocks
  - sudo luarocks install luacov
  - sudo luarocks install luacov-coveralls
  - sudo luarocks install Mockagne
  - sudo luarocks install lua-cjson
  - sudo luarocks install remotelog
  - sudo luarocks install LuaUnit

script:
  - lua -lluacov test_query_renderer.lua
  - lua -lluacov test_request_dispatcher.lua
  - lua -lluacov test_adapter.lua
  - lua -lluacov test_metadata_reader.lua
  - lua -lluacov test_query_rewriter.lua
  - lua -lluacov test_table_protection_reader.lua
  - lua -lluacov test_user_information.lua

after_success:
  - luacov-coveralls